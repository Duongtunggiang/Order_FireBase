<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Data v√†o Firebase Firestore</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #cce7ff; color: #004085; border: 1px solid #b3d7ff; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto; max-height: 300px; }
        textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Import D·ªØ Li·ªáu v√†o Firebase Firestore</h1>
        <p>Tool n√†y gi√∫p b·∫°n import d·ªØ li·ªáu m·∫´u v√†o Firestore Database m·ªôt c√°ch d·ªÖ d√†ng.</p>

        <div id="status"></div>

        <h3>üìã B∆∞·ªõc 1: L·∫•y Firebase Config</h3>
        <p>V√†o Firebase Console > Project Settings > General > Your apps > Web app</p>
        <p>Sao ch√©p ƒëo·∫°n code config (t·ª´ <code>const firebaseConfig =</code> ƒë·∫øn <code>};</code>)</p>
        <textarea id="firebaseConfig" rows="8" placeholder="const firebaseConfig = {
  apiKey: 'your-api-key',
  authDomain: 'your-project.firebaseapp.com',
  projectId: 'your-project-id',
  storageBucket: 'your-project.appspot.com',
  messagingSenderId: '123456789',
  appId: 'your-app-id'
};"></textarea>

        <h3>üìã B∆∞·ªõc 2: Import Data</h3>
        <p>Click n√∫t d∆∞·ªõi ƒë·ªÉ import 18 m√≥n m·∫´u v√†o Firestore.</p>
        <button id="importBtn" onclick="importData()">üöÄ B·∫Øt ƒê·∫ßu Import</button>

        <div id="progress" style="display: none;">
            <p>ƒêang import... <span id="progressText">0/18</span></p>
            <div style="width: 100%; height: 20px; background: #f0f0f0; border-radius: 10px;">
                <div id="progressBar" style="width: 0%; height: 100%; background: #007bff; border-radius: 10px; transition: width 0.3s;"></div>
            </div>
        </div>

        <h3>üìã B∆∞·ªõc 3: Ki·ªÉm tra k·∫øt qu·∫£</h3>
        <p>Sau khi import xong, v√†o Firebase Console > Firestore Database ƒë·ªÉ xem d·ªØ li·ªáu.</p>

        <details>
            <summary>üîß Xem c·∫•u tr√∫c d·ªØ li·ªáu m·∫´u</summary>
            <pre id="sampleData"></pre>
        </details>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const menuItems = [
            {
                name: "Tr√† S·ªØa Tr√¢n Ch√¢u ƒê∆∞·ªùng ƒêen",
                description: "Tr√† s·ªØa truy·ªÅn th·ªëng v·ªõi tr√¢n ch√¢u d·∫ªo ngon v√† ƒë∆∞·ªùng ƒëen ƒë·∫∑c tr∆∞ng",
                price: 35000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1558857563-b371033873b8?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Tr√† ƒê√° Xanh Latte",
                description: "Tr√† xanh Nh·∫≠t B·∫£n pha latte kem s·ªØa, v·ªã thanh m√°t",
                price: 45000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1546173159-315724a3167d?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "C√† Ph√™ S·ªØa ƒê√°",
                description: "C√† ph√™ ƒëen pha s·ªØa t∆∞∆°i, v·ªã ƒë·∫Øng ng·ªçt c√¢n b·∫±ng",
                price: 25000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1559496417-e7f25cb247f3?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Sinh T·ªë B∆°",
                description: "Sinh t·ªë b∆° t∆∞∆°i v·ªõi s·ªØa ƒë·∫∑c v√† ƒë√° l·∫°nh",
                price: 40000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1553909489-cd5096e7fb06?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Tr√† √î Long Kem Ph√¥ Mai",
                description: "Tr√† √¥ long ƒë·∫≠m ƒë√† ph·ªß l·ªõp kem ph√¥ mai th∆°m ngon",
                price: 50000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "N∆∞·ªõc √âp D∆∞a H·∫•u",
                description: "N∆∞·ªõc √©p d∆∞a h·∫•u t∆∞∆°i nguy√™n ch·∫•t, gi·∫£i kh√°t",
                price: 30000,
                category: "ƒê·ªì U·ªëng",
                imageUrl: "https://images.unsplash.com/photo-1546173159-315724a3167d?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "B√°nh M√¨ K·∫πp Th·ªãt N∆∞·ªõng",
                description: "B√°nh m√¨ gi√≤n tan k·∫πp th·ªãt n∆∞·ªõng th∆°m ngon v·ªõi rau c·ªß",
                price: 25000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1551782450-17144efb5723?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "C∆°m T·∫•m S∆∞·ªùn B√¨",
                description: "C∆°m t·∫•m v·ªõi s∆∞·ªùn n∆∞·ªõng, b√¨, tr·ª©ng ·ªëp la v√† ƒë·ªì chua",
                price: 35000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Ph·ªü B√≤",
                description: "Ph·ªü b√≤ t√°i ch√≠n v·ªõi n∆∞·ªõc d√πng ninh x∆∞∆°ng th∆°m ng·ªçt",
                price: 40000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "G·ªèi Cu·ªën",
                description: "G·ªèi cu·ªën t∆∞∆°i v·ªõi t√¥m, th·ªãt, rau s·ªëng v√† n∆∞·ªõc m·∫Øm chua ng·ªçt",
                price: 30000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "B√∫n B√≤ Hu·∫ø",
                description: "B√∫n b√≤ Hu·∫ø cay n·ªìng v·ªõi th·ªãt b√≤ v√† gi√≤ heo",
                price: 45000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1559847844-5315695dadae?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Salad Tr√°i C√¢y",
                description: "Salad tr√°i c√¢y t∆∞∆°i v·ªõi d·ª´a, xo√†i, d∆∞a h·∫•u v√† m·∫≠t ong",
                price: 28000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "M√¨ X√†o H·∫£i S·∫£n",
                description: "M√¨ x√†o v·ªõi t√¥m, m·ª±c, b·∫°ch tu·ªôc v√† rau c·ªß t∆∞∆°i",
                price: 42000,
                category: "ƒê·ªì ƒÇn",
                imageUrl: "https://images.unsplash.com/photo-1563379091339-03246963d96c?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Bia S√†i G√≤n Lager",
                description: "Bia S√†i G√≤n Lager m√°t l·∫°nh, v·ªã ƒë·∫Øng nh·∫π",
                price: 25000,
                category: "ƒê·ªì Nh·∫≠u",
                imageUrl: "https://images.unsplash.com/photo-1608270586620-248524c67de9?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "R∆∞·ª£u Vang ƒê·ªè",
                description: "R∆∞·ª£u vang ƒë·ªè nh·∫≠p kh·∫©u, ph√π h·ª£p ƒë·ªÉ nh√¢m nhi",
                price: 150000,
                category: "ƒê·ªì Nh·∫≠u",
                imageUrl: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Cocktail Mojito",
                description: "Cocktail Mojito v·ªõi b·∫°c h√†, chanh v√† soda",
                price: 55000,
                category: "ƒê·ªì Nh·∫≠u",
                imageUrl: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Bia Tiger",
                description: "Bia Tiger m√°t l·∫°nh t·ª´ Singapore",
                price: 20000,
                category: "ƒê·ªì Nh·∫≠u",
                imageUrl: "https://images.unsplash.com/photo-1608270586620-248524c67de9?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            },
            {
                name: "Whisky Chivas Regal",
                description: "Whisky Chivas Regal 12 nƒÉm, v·ªã c·ªï ƒëi·ªÉn",
                price: 350000,
                category: "ƒê·ªì Nh·∫≠u",
                imageUrl: "https://images.unsplash.com/photo-1527281400683-1a8a7ce3491c?w=400&h=300&fit=crop&crop=center",
                updatedAt: new Date()
            }
        ];

        let app, db;

        function showStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function updateProgress(current, total) {
            const progressText = document.getElementById('progressText');
            const progressBar = document.getElementById('progressBar');
            progressText.textContent = `${current}/${total}`;
            progressBar.style.width = `${(current / total) * 100}%`;
        }

        window.importData = async function() {
            try {
                const configText = document.getElementById('firebaseConfig').value.trim();
                if (!configText) {
                    showStatus('‚ùå Vui l√≤ng nh·∫≠p Firebase config!', 'error');
                    return;
                }

                // Parse Firebase config
                let firebaseConfig;
                try {
                    // Remove 'const firebaseConfig = ' and trailing ';'
                    const configStr = configText
                        .replace(/const firebaseConfig\s*=\s*/, '')
                        .replace(/;$/, '');
                    firebaseConfig = JSON.parse(configStr);
                } catch (e) {
                    showStatus('‚ùå Firebase config kh√¥ng h·ª£p l·ªá! Ki·ªÉm tra l·∫°i format JSON.', 'error');
                    return;
                }

                showStatus('üîÑ ƒêang k·∫øt n·ªëi Firebase...', 'info');

                // Initialize Firebase
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);

                showStatus('‚úÖ K·∫øt n·ªëi th√†nh c√¥ng! B·∫Øt ƒë·∫ßu import d·ªØ li·ªáu...', 'success');

                // Show progress
                document.getElementById('progress').style.display = 'block';
                document.getElementById('importBtn').disabled = true;

                let successCount = 0;
                let errorCount = 0;

                // Import each item
                for (let i = 0; i < menuItems.length; i++) {
                    try {
                        await addDoc(collection(db, 'menuItems'), menuItems[i]);
                        successCount++;
                        updateProgress(i + 1, menuItems.length);
                        showStatus(`‚úÖ ƒê√£ import ${successCount}/${menuItems.length} m√≥n: ${menuItems[i].name}`, 'success');
                    } catch (error) {
                        console.error('Error importing item:', error);
                        errorCount++;
                        showStatus(`‚ùå L·ªói import m√≥n: ${menuItems[i].name}`, 'error');
                    }

                    // Small delay to avoid rate limiting
                    await new Promise(resolve => setTimeout(resolve, 500));
                }

                if (errorCount === 0) {
                    showStatus(`üéâ Import ho√†n th√†nh! ƒê√£ th√™m ${successCount} m√≥n v√†o Firestore.`, 'success');
                } else {
                    showStatus(`‚ö†Ô∏è Import xong v·ªõi ${errorCount} l·ªói. ${successCount} m√≥n th√†nh c√¥ng.`, 'info');
                }

                document.getElementById('importBtn').disabled = false;

            } catch (error) {
                console.error('Import error:', error);
                showStatus('‚ùå L·ªói k·∫øt n·ªëi Firebase: ' + error.message, 'error');
                document.getElementById('importBtn').disabled = false;
            }
        };

        // Show sample data
        document.getElementById('sampleData').textContent = JSON.stringify(menuItems.slice(0, 3), null, 2);
    </script>
</body>
</html>
